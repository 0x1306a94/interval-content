### 基础知识

#### 进程和线程的区别

- 根本区别：进程是操作系统资源分配的基本单位，线程是任务调度和执行的基本单位；
- 在开销方面：每个进程都有独立的代码和数据空间，程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器，线程之间切换的开销小。
- 所处环境：在操作系统中能同时运行多个进程；而在同一个进程中有多个线程同时执行，通过CPU调度，在每个时间片中只有一个线程执行
- 内存分配方面：系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存，线程所使用的资源来自其所属进程的资源，线程组之间只能共享资源。
- 包含关系：没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线共同完成的；线程是进程的一部分，所以线程也被称为轻量级进程。


#### 堆和栈区的区别？谁的占用内存空间大

- 栈内存存储的是局部变量，而堆内存是实体；
- 栈内存的更新速度高于堆内存；
- 栈内存的生命周期一结束就会被释放，而堆内存会被垃圾回收机制不定时回收。
- 堆是向高地址扩展的数据结构，是不连续的内存区域。这是由于系统是用链表来存储空闲内存地址的，自然是不连续的，而链表的遍历方向是由低地址向高地址。堆的大小受限于计算机系统中有效的虚拟内存。由此可见，堆获得的空间比较灵活，也比较大。

#### TCP的握手过程？为什么进行三次握手，四次挥手

![参考图片](./011.jpg)

[了解更多](https://baijiahao.baidu.com/s?id=1618114723935605183&wfr=spider&for=pc)


#### HTTPS的握手过程

- 建立服务器443端口连接
- SSL握手：证书，随机密钥，加密算法
- 发送加密请求
- 发送加密响应
- 关闭SSL
- 关闭TCP

![参考图片](./012.jpg)

#### 什么是中间人攻击？怎么预防？

- 中间人把自己的公钥给到客户端，之后用自己的私钥解开客户端数据，再用后台的公钥加密数据，发给后台。这样中间人能拿到双端的数据。
一般禁止接入代理和在代码内比对证书。


#### 对称加密算法和非对称加密算法区别

对称加密算法，是用的一个秘钥，进行加密和解密。而非对称加密算法，用的是一对秘钥，包括公钥和私钥，一般用公钥加密，私钥解密。


#### 常见的对称加密和非对称加密算法有哪些

对称加密有AES、3DES，非对称加密有RSA。


#### MD5、Sha1、Sha256区别

- MD5值长度是128位（16个字符）、SHA1值长度是160位（20个字符）、SHA256值长度是256位（32个字符）。
- MD5，消息摘要算法，一种被广泛使用的密码散列函数，可以产生一个128位长的散列值（hash value），用于确保信息传输完整一致。
- Sha1，安全哈希算法，主要适用于数字签名标准里面定义的数字签名算法。对于长度小于2^64位的消息，Sha1会产生一个160位长的消息摘要。
- Sha256，哈希值表示大量数据的固定大小的唯一值。数据的少量更改会在哈希值中产生不可预知的大量更改。Sha256 算法的哈希值长度为 256 位。


#### charles抓包过程？不使用charles，4G网络如何抓包

- 运行charles，手机配置代理。如果是http协议，charles能看到所有的请求和返回数据。如果要看到https的数据，需要在手机上安装charles证书，并信任证书。
- 4G网络，如果是安卓设备，用Packet Capture、tshark或者tcpdump。如果是iOS设备，用Fiddler、tcpdump和wireshark。


#### 苹果使用证书的目的是什么

- 苹果使用证书，来签名APP，一是防止APP被篡改，二是防止没有苹果签名的APP安装到设备上。


#### AppStore安装app时的认证流程

当安装时，苹果的认证流程是，
1. 苹果用设备系统的本地公钥，验证APP的MD5值的签名。

在上传时，苹果的操作流程是，
1. 苹果验证发布证书和 Provisioning Profile
2. 苹果用后台的私钥，给包重新签名

所以，原来的本地私钥签名就没有用了。苹果没有控制包的有效期，就不需要内置 embedded.mobileprovision 。当上传到AppStore后，就跟你的 证书 / Provisioning Profile 都没有关系了。无论它们是否过期或被废除，都不会影响 AppStore 上的安装包。


#### 开发者怎么在debug模式下把app安装到设备呢

1. 苹果用设备系统的本地公钥，验证 embedded.mobileprovision 的签名，验证开发证书的签名是否正确。
2. 用开发证书的公钥验证APP签名，验证AppID是否对应得上，设备ID是否在ID列表上，权限开关是否跟APP里的Entitlements对应等。


